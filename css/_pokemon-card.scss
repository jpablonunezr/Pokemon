.pokemon {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  filter: saturate(1.25);

  &__options {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2.5rem;
    position: relative;
  }

  &__card {
    font-size: 12rem;
    width: 17rem;
    height: 22rem;
    line-height: 1;
    padding: 1rem;
    user-select: none;
    position: relative;
    border-radius: $card-radius;
    transition: $ease3;
    perspective: 1000px;
    perspective-origin: 50% 50%;
    z-index: 25;
    filter: grayscale(1);

    &::after {
      content: '';
      @extend %full-size;
      z-index: 0;
      opacity: .15;
      background: no-repeat center/auto 100%;
      border-radius: $card-radius;
      transition: $ease3;
    }

    // BG evolution
    &.grass::after { background-image: url('../img/pokemon/venusaur.png') }
    &.fire::after  { background-image: url('../img/pokemon/charizard.png') }
    &.water::after { background-image: url('../img/pokemon/blastoise.png') }


    .image {
      @extend %full-size;
      height: 98%;
      transition: $ease3;
      z-index: 10;
      background: no-repeat center/70%;

      &::after {
        content: attr(data-name);
        position: absolute;
        left: -.3rem;
        top: 68%;
        width: 100%;
        text-align: center;
        font-family: $ff-jp;
        font-size: 3rem;
        font-weight: 900;
        text-transform: uppercase;
        color: white;
        transition: $ease3;
        letter-spacing: -4px;
      }
    }

    &.grass .image { background-image: url('../img/pokemon/bulbasaur.png') }
    &.fire  .image { background-image: url('../img/pokemon/charmander.png') }
    &.water .image { background-image: url('../img/pokemon/squirtle.png') }


    &.grass .image-bg { background-image: url('../img/icon/grass__type.svg')  }
    &.fire  .image-bg { background-image: url('../img/icon/fire__type.svg') }
    &.water .image-bg { background-image: url('../img/icon/water__type.svg') }

    &.grass .bg { background-image: radial-gradient(circle, $grass-xl 0%, $grass-xd 80%)}
    &.fire  .bg { background-image: radial-gradient(circle, $fire-xl 0%, $fire-xd 80%)}
    &.water .bg { background-image: radial-gradient(circle, $water-xl 0%, $water-xd 80%)}

    &.grass .type .icon { background-image: url('../img/icon/grass__type.svg'); color: $grass-xl}
    &.fire  .type .icon { background-image: url('../img/icon/fire__type.svg');  color: $fire-xl}
    &.water .type .icon { background-image: url('../img/icon/water__type.svg'); color: $water-xl}

    &.grass .bg { outline-color: $grass};
    &.fire  .bg { outline-color: $fire-l };
    &.water .bg { outline-color: $water-l};

    .type {
      @extend %full-size;
      border-radius: $card-radius;
      overflow: hidden;

      &::after,
      &::before {
        width: 100%;
        position: absolute;
        color: white;
        opacity: .9;
        font-family: $ff-base;
        transition: $ease3;
      }

      &::after {
        content: attr(data-index);
        top: 1rem;
        right: 1rem;
        text-align: right;
        font-size: 1rem;
      }

      &::before {
        content: attr(data-original);
        bottom: 1.2rem;
        right: 1rem;
        font-size: .6rem;
        text-align: right;
        letter-spacing: 1px;
        text-transform: uppercase;
        z-index: 1;
      }

      .icon {
        position: absolute;
        left: .5rem;
        top: 3rem;
        font-size: 1rem;
        width: 1.5rem;
        display: flex;
        align-items: center;
        padding-left: 1.5rem;
        opacity: 1;
        background-position: center;
        background-size: 110%;
      }

      .label {
        position: absolute;
        font-size: 1.4rem;
        top: 1rem;
        left: 1rem;
        color: #fff;
        font-weight: bold;
      }
    }

    .fx {
      @extend %full-size;
      overflow: hidden;
      border-radius: $card-radius;
      mix-blend-mode: color-dodge;
      pointer-events: none;

      img {
        width: 100%;
        visibility: hidden;
        height: 100%;
        object-fit: cover;
        object-position: center;
        user-select: none;
      }

    }

    .bg {
      content: '';
      @extend %full-size;
      border-radius: $card-radius;
      outline: 0 solid;
      transition: $ease3;
      transition-duration: .5s;
      z-index: 0;

      // Card spark
      &::before {
        content: '';
        @extend %full-size;
        background: url('../img/fx/brillo.gif') no-repeat center/120%;
        z-index: 0;
        mix-blend-mode: overlay;
        border-radius: $card-radius;
        transition: $ease3;
        opacity: 0;
      }

      //Choose pokemon
      &::after {
        content: attr(data-title);
        position: absolute;
        top: calc(100% + 1rem);
        left: 0rem;
        width: max-content;
        font-size: .75rem;
        border: 1px solid #999;
        color: $black;
        text-transform: uppercase;
        font-family: $ff-base;
        opacity: 0;
        transform: translate(-2rem,0);
        transition: $ease3;
        transition-duration: .5s;
        font-weight: bold;
        letter-spacing: .5px;
        padding: .66rem;
        text-align: center;
        z-index: 55;
      }
    }

    @import 'hover-card';
  }

  #cpuSelection.animation .grass { animation: grass  1s infinite }
  #cpuSelection.animation .fire  { animation: fire 1s infinite }
  #cpuSelection.animation .water { animation: water 1s infinite }

  #cpuGrass.grass .image { background-image: url('../img/pokemon/chikorita.png') }
  #cpuFire.fire   .image { background-image: url('../img/pokemon/cyndaquil.png') }
  #cpuWater.water .image { background-image: url('../img/pokemon/totodile.png') }

  #cpuGrass.grass::after { background-image: url('../img/pokemon/meganium.png')}
  #cpuFire.fire::after   { background-image: url('../img/pokemon/typhlosion.png') }
  #cpuWater.water::after { background-image: url('../img/pokemon/feraligatr.png') }


  #cpuSelection {
    &:hover {
      * {
        pointer-events: none
      }
    }

    .pokemon__card::before {
      display: none;
    }
  }
}
